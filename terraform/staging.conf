terraform {
  required_providers {
    kubernetes = {
      source = "hashicorp/kubernetes"
    }
    # [2단계] AWS provider를 삭제했습니다. 
    # 로컬 쿠버네티스 환경이므로 AWS 접근 권한이 필요 없습니다.
  }

  # [2단계] AWS S3 백엔드 설정을 삭제했습니다.
  # 이제 실행 경로에 terraform.tfstate 파일이 생성되어 AWS 없이도 인프라 관리가 가능합니다.
}

# 변수 설정: 쿠버네티스 설정 파일 경로
variable "kubernetes_config_path" {
  type    = string
  default = "~/.kube/config"
}

# 쿠버네티스 프로바이더 설정
provider "kubernetes" {
  config_path = var.kubernetes_config_path
}

# 스테이징 환경을 위한 네임스페이스 정의
resource "kubernetes_namespace" "staging_ns" {
  metadata {
    name = "prgms-notes"
  }
}